<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>javascript/form_checkbox.html</title>
</head>
<body>
<div id='javascript'>
   <h1>checkbox</h1>
   <form name='frm'>
      <label><input type='checkbox' name='mnt' value='백두산'>백두산</label>
      <label><input type='checkbox' name='mnt' value='금강산'>금강산</label>
      <label><input type='checkbox' name='mnt' value='설악산'>설악산</label>
      <label><input type='checkbox' name='mnt' value='치악산'>치악산</label>
      <label><input type='checkbox' name='mnt' value='도봉산'>도봉산</label>
      <label><input type='checkbox' name='mnt' value='수락산'>수락산</label>
      <label><input type='checkbox' name='mnt' value='지리산'>지리산</label>
      <br/>
      <input type='button' value='선택' name='btn'/>
      <br/>
      <textarea name='result' rows='10' cols='50'></textarea>
   </form>
</div>
<script>
   var frm = document.frm;
   /*페이지가 리로딩 되었을 때 이전에 선택한 항목들의 체크 상태를 그대로 유지*/
   var saveData = []; //localStorage에 저장할 item
   saveData = localStorage.getItem('mnt');
   
   
   //이전에 선택한 항목들을 다시 체크해준다
   if(saveData != null){
	   
   //배열값이 하나의 문자열로 저장되어 있어 ',' 분리하여 배열로 반환
   saveData = saveData.split(',');
   
   for(x of saveData){
	   for(y in frm.mnt){
		   if(x==frm.mnt[y].value){
			   frm.mnt[y].checked=true;
			   break;
		   }
	   }
   }
   }
   
   frm.btn.addEventListener('click', function(){
	   saveData=[];
	   frm.result.value += '---------\n';
	   
	   for(x of frm.mnt){
		   if(x.checked){
		   frm.result.value += x.value + '\n';
		   saveData.push(x.value);
		   }
	   }
	   localStorage.setItem('mnt', saveData);
   })
</script>
</body>
</html>